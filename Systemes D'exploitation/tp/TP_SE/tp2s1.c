#include<stdio.h>
#include<stdlib.h>
#include<unistd.h>
#include<fcntl.h>
#include<errno.h>
#include<string.h>


int main (int argc , char *argv[]){
    
    // check the existence of the arguments 
    if(argc<=1){printf("no argumments detected ");}
    else{
        printf("The different type of ACCESS to a file\n1/F-OK(FILE OKAY)\n2/R_OK(READ PERMISSION OKAY )\n3/W_OK(WRITE PERMISSION OKAY)\n4/X_OK(EXECUTE PERMISSION OKAY)\n"); 


// access () fn section 

    int nmbr[3];
    // initialisation des flags 
  nmbr[0] =access(argv[1],F_OK);
  nmbr[1]= access(argv[1],R_OK);
  nmbr[2]= access(argv[1],W_OK);
  nmbr[3] =access(argv[1],X_OK);
  // print number of argc
  printf("number of argc :%d \n",argc);
  // affichage des ACCESS



  for(int i=0; i<=3;i++){
      
      printf("numero[%d] = %d \n",i, nmbr[i]);

                        }

//~~~~~~~~~~~~~~~~~~~~~~~~~~errno part ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~`
if(nmbr[0]==0)
            {
            printf("Statement verified\n");
            }else if (errno==ENOENT)
                {
                    printf("File doens't match the statement \n");
                }else if(errno==EACCES)
                    {
                        printf("You may want to check the directory\n");
                    }

if(nmbr[2]==0){
            printf("Statement verified\n");
            }else if (errno==EROFS)
                {
                    printf(" The file doens't match the statement\n");
                }else if(errno==EACCES)
                    {
                    printf("You may want to check the directory \n");
                    }
            

            
    
//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~`
    // open() fn section 
    int op;
    char buf;
    printf("%d\n",argc-1);


    for(int r=1;r<argc;r++){
    // open suivi du mode d'ouverture 
        op=open(argv[r],O_RDONLY);
        if(op==-1){
            printf("the file %s doesn't exist \n" ,argv[r]);
            }else{
                printf("opening the file ...\n");
    //ici j represente le nombre de char qu'on cherche a afficher depuis le 
    //fichier test.txt
      
      while(read(op,&buf,1)){
     //read va lire un charactere depuis fichier et le copier dans le buf
                               //if(read(op,&buf,1) != 0)
                                //write va l'ecrire sur l'invite de commande 
                                write(1,&buf,1);
                                
                            }
                printf("\n");
                close(op);

      //  system("open test.txt");
    }



   }


return(0);}